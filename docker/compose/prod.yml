version: '3.9'
services: 

  redis:
    extends:
      file: ../services.yml
      service: redis

  mongo:
    extends:
      file: ../services.yml
      service: mongo

  api:
    extends:
      file: ../services.yml
      service: api

  nginx:
    extends:
      file: ../services.yml
      service: nginx
    environment:
      - NGINX_HOST_API=http://api
      - NGINX_HOST_WEB=http://host.docker.internal:3000
    ports:
      - ${NGINX_EXPOSE}:80
      - ${MONGO_EXPOSE}:27017
      - ${REDIS_EXPOSE}:6379
    links:
      - redis:redis
      - mongo:mongo
      - api:api