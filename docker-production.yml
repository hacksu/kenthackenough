version: '3.9'
services: 

  redis:
    extends:
      file: docker/services.yml
      service: redis

  mongo:
    extends:
      file: docker/services.yml
      service: mongo

  api:
    extends:
      file: docker/services.yml
      service: api

  nginx:
    extends:
      file: docker/services.yml
      service: nginx
    environment:
      - NGINX_HOST_API=http://api
      - NGINX_HOST_WEB=http://host.docker.internal:3000
    ports:
      - 80:80
    links:
      - redis:redis
      - mongo:mongo
      - api:api